<!DOCTYPE html>
<html lang="en" class="theme-light">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>MTERMS 2026 ‚Äî Admin</title>

  <!-- Reuse your main CSS -->
  <link rel="stylesheet" href="assets/styles.css" />

  <!-- Theme overrides + hero-independent palette -->
  <style id="theme-overrides">
    :root.theme-light{--bg:#fff;--surface:#fff;--text:#0b1115;--border:#e5e7eb;--muted:#667085;}
    :root.theme-dark{--bg:#0b1115;--surface:#0e151a;--text:#e9f1f6;--border:#1f2a31;--muted:#9aa4af;}
    html,body{background:var(--bg);color:var(--text);}
    .admin-wrap{width:min(1200px,92vw);margin:24px auto;}
    .admin-head{display:flex;align-items:center;justify-content:space-between;margin:8px 0 16px;}
    .theme-toggle{margin-left:8px;border:1px solid var(--border);border-radius:10px;padding:8px 10px;cursor:pointer;background:#fff;color:#0b1115}
    .theme-dark .theme-toggle{background:#1e1f24;color:#fff;border-color:#333}
    .card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:12px;margin-bottom:16px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .row-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
    input,select,textarea{width:100%;padding:8px;border:1px solid var(--border);border-radius:8px;background:var(--bg);color:var(--text)}
    table{width:100%;border-collapse:collapse;font-size:.95rem}
    th,td{padding:8px;border-bottom:1px solid var(--border)}
    th{text-align:left}
    .actions{display:flex;gap:8px}
    .btn{border:1px solid var(--border);border-radius:8px;padding:8px 12px;background:#fff;cursor:pointer}
    .btn.ghost{background:transparent}
    .badge{width:260px;height:400px;background:#fff;color:#0b1115;border-radius:16px;border:1px solid #e8e8e8;box-shadow:0 8px 24px rgba(0,0,0,.08);display:flex;flex-direction:column;overflow:hidden}
    .badge-top{padding:8px 10px 4px}
    .badge-logos{display:flex;justify-content:center;align-items:center;gap:8px}
    .badge-logos img{height:20px}
    .badge-photo-wrap{margin:8px auto 0;width:180px;height:240px;position:relative;border:1px solid #ddd;border-radius:10px;overflow:hidden;background:#f2f4f7}
    .badge-photo{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;display:block}
    .badge-info{text-align:center;padding:10px 12px 0}
    .badge-name{font-weight:800;font-size:18px}
    .badge-affil{font-size:12px;color:#475467}
    .badge-cat{font-size:12px;color:#0b7a64;font-weight:700;margin-top:6px}
    .badge-footer{margin-top:auto;font-size:11px;text-align:center;padding:8px 10px 10px;color:#667085;border-top:1px solid #eef2f6;background:#fafafa}

    /* print */
    @media print{
      body{background:#fff;color:#000}
      .no-print{display:none !important}
      .print-grid{display:grid;grid-template-columns:repeat(2, 280px);gap:20px}
      .badge{break-inside:avoid}
    }

    /* ---------- Readability fixes (target only the faint areas) ---------- */

/* 1) Inputs: ensure good text + placeholder contrast */
input, select, textarea { color: var(--text); }
input::placeholder, textarea::placeholder { color: var(--muted); opacity: 1; }

/* 2) Table headers: stronger contrast in light & dark */
table thead th {
  color: var(--text);
  font-weight: 600;
}

/* 3) Buttons: make disabled states readable (remove default washed-out opacity) */
.btn:disabled,
button[disabled] {
  opacity: 1;                     /* cancel browser fade */
  cursor: not-allowed;
  border-color: var(--border);
}

/* Light theme disabled buttons */
.theme-light .btn:disabled,
.theme-light button[disabled] {
  background: #eef2f7;            /* soft grey on white */
  color: #6b7280;                  /* slate-500 for legibility */
}

/* Dark theme disabled buttons */
.theme-dark .btn:disabled,
.theme-dark button[disabled] {
  background: #2a2f36;            /* raised charcoal */
  color: #b6c2ce;                  /* light slate text */
  border-color: #3a424a;
}

/* 4) Ghost buttons (e.g., Logout) need clearer text outlines in light mode */
.theme-light .btn.ghost {
  color: #0b1115;                  /* solid dark text */
  background: transparent;
  border-color: var(--border);
}

/* 5) Make the small ‚ÄúEdit‚Äù buttons readable even when disabled */
.actions .btn:disabled {
  font-weight: 600;
}

  </style>
</head>
<body>
  <div class="admin-wrap">
    <div class="admin-head">
      <div>
        <h1 style="margin:0">MTERMS 2026 ‚Äî Admin</h1>
        <div style="opacity:.8">Manage participants, edit details, preview photos, and print badges.</div>
      </div>
      <div class="no-print">

        <button 
  onclick="window.location.href='index.html'" 
  style="
    display:inline-block;
    margin-top:12px;
    padding:6px 12px;
    border:none;
    border-radius:8px;
    background:linear-gradient(90deg,#19c37d,#0ea5a6);
    color:#fff;
    font-weight:600;
    font-size:13px;
    cursor:pointer;
    transition:transform .15s ease, box-shadow .15s ease;
  "
  onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 4px 12px rgba(0,0,0,.25)';"
  onmouseout="this.style.transform='';this.style.boxShadow='';"
>
  ‚Üê Back to Main Page
</button>

        
        <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme">üåû</button>
        <button id="logoutBtn" class="btn ghost">Logout</button>
      </div>
    </div>

    <!-- Login card -->
    <div id="loginCard" class="card">
      <h3>Admin Login</h3>
      <div class="row">
        <label>Username <input id="aUser" value="admin"></label>
        <label>Password <input id="aPass" type="password" value="admin"></label>
      </div>
      <button id="aLogin" class="btn">Login</button>
      <span id="aMsg" style="margin-left:8px;font-size:.95rem"></span>
    </div>

    <!-- Dashboard -->
    <div id="dash" class="no-print" style="display:none">
      <div class="card">
        <div class="row">
          <label>Search (name, email, code)
            <input id="q" placeholder="e.g., Rahman, uitm.edu, MTERM2026-000123">
          </label>
          <div style="display:flex;gap:8px;align-items:end">
            <button id="refresh" class="btn">Refresh</button>
            <button id="printSel" class="btn">Print selected badges</button>
          </div>
        </div>
      </div>

      <div class="card" style="overflow:auto">
        <table id="tbl">
          <thead>
            <tr>
              <th><input type="checkbox" id="selAll"></th>
              <th>Code</th>
              <th>Name</th>
              <th>Category</th>
              <th>Email</th>
              <th>Payment</th>
              <th>Affiliation</th>
              <th style="width:160px">Actions</th>
            </tr>
          </thead>
          <tbody id="rows">
            <!-- populated by JS -->
          </tbody>
        </table>
        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px">
          <button id="prev" class="btn ghost">Prev</button>
          <span id="pageInfo" style="align-self:center"></span>
          <button id="next" class="btn ghost">Next</button>
        </div>
      </div>

      <!-- Edit panel -->
      <div class="card" id="editCard" style="display:none">
        <h3>Edit Participant</h3>
        <div id="editCode" style="opacity:.8;margin-bottom:6px"></div>
        <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap">
  <label style="flex:1 1 600px;margin:0;min-width:280px">Category
    <select id="f-category" style="width:100%">
      <option value="student">Student</option>
      <option value="academia">Academia</option>
      <option value="industry">Industry</option>
    </select>
  </label>

          <label><input type="checkbox" id="f-dinner"> Add Gala Dinner</label>

</div>


        <h4>Personal</h4>
        <div class="row">
          <input id="p-firstName" placeholder="First name">
          <input id="p-lastName" placeholder="Last name">
          <input id="p-email" placeholder="Email">
          <input id="p-phone" placeholder="Phone">
          <input id="p-country" placeholder="Country">
        </div>

        <h4>Professional</h4>
        <div class="row">
          <input id="pro-affiliation" placeholder="University / Company">
          <input id="pro-dept" placeholder="Department">
          <input id="pro-role" placeholder="Role/Title">
        </div>

        <div id="studentOnly" style="display:none">
          <h4>Student</h4>
          <div class="row-3">
            <input id="s-university" placeholder="University">
            <select id="s-level">
              <option value="">Level</option><option>UG</option><option>MSc</option><option>PhD</option><option>Other</option>
            </select>
            <input id="s-grad" type="number" placeholder="Expected grad year">
          </div>
        </div>

        <h4>Program</h4>
        <div class="row">
          <label class="field-inline" style="display:flex;align-items:center;gap:8px">
            <input type="checkbox" id="pr-presenting"> Presenter
          </label>
          <select id="pr-type">
            <option value="none">None</option><option value="talk">Oral</option><option value="poster">Poster</option><option value="workshop">Workshop</option>
          </select>
          <input id="pr-title" placeholder="Presentation title">
          <input id="pr-topic" placeholder="Topic area">
        </div>

        <h4>Billing</h4>
        <div class="row">
          <input id="b-billTo" placeholder="Bill-to name">
          <input id="b-taxNo" placeholder="Company Tax/GST/VAT No.">
          <input id="b-po" placeholder="PO number">
        </div>

        <h4>Address</h4>
        <div class="row-3">
          <input id="a-line1" placeholder="Address line 1">
          <input id="a-line2" placeholder="Address line 2">
          <input id="a-city" placeholder="City">
          <input id="a-state" placeholder="State/Province">
          <input id="a-postcode" placeholder="Postcode">
          <input id="a-country" placeholder="Country">
        </div>

        <h4>Consents</h4>
        <div class="row">
          <label><input type="checkbox" id="c-pdpa"> PDPA</label>
          <label><input type="checkbox" id="c-coc"> Code of Conduct</label>
          <label><input type="checkbox" id="c-mkt"> Marketing opt-in</label>
        </div>

        <h4>Payment</h4>
        <div class="row">
          <select id="pay-status">
            <option value="pending">pending</option>
            <option value="paid">paid</option>
            <option value="verified">verified</option>
          </select>
          <input id="pay-amount" type="number" placeholder="Amount (MYR)">
        </div>

        <div class="row">
          <button id="save" class="btn">Save changes</button>
          <span id="saveMsg" style="align-self:center"></span>
        </div>

        <h4>Photo</h4>
        <div class="row">
          <div>
            <div class="badge">
              <div class="badge-top">
                <div class="badge-logos">
                  <img src="public/uitm.png" alt="UiTM">
                  <img src="public/mohe.png" alt="MOHE">
                  <img src="public/tesma.png" alt="TESMA">
                </div>
              </div>
              <div class="badge-photo-wrap">
                <img id="badgePhoto" class="badge-photo" alt="ID photo">
              </div>
              <div class="badge-info">
                <div id="badgeName" class="badge-name">Participant Name</div>
                <div id="badgeAffil" class="badge-affil">Institution / Company</div>
                <div id="badgeCat" class="badge-cat">CATEGORY</div>
              </div>
              <div class="badge-footer">MTERMS 2026 ‚Ä¢ Shah Alam</div>
            </div>
            <div style="margin-top:8px" class="no-print">
              <button id="printBadge" class="btn">Print this badge</button>
            </div>
          </div>
          <div>
            <div id="photoMsg" style="opacity:.9"></div>
            <button id="loadPhoto" class="btn">Load latest photo</button>
          </div>
        </div>
      </div>

      <!-- Hidden print layout for selected badges -->
      <div id="printArea" class="print-grid" style="display:none"></div>
    </div>
  </div>

  <script>
    // Theme toggle
    (function(){
      const root=document.documentElement,btn=document.getElementById('themeToggle'),KEY='mterms-theme';
      const saved=localStorage.getItem(KEY);
      if(saved==='dark'){root.classList.replace('theme-light','theme-dark');}
      if(btn){btn.textContent=root.classList.contains('theme-dark')?'üåô':'üåû';
        btn.addEventListener('click',()=>{const dark=root.classList.toggle('theme-dark');root.classList.toggle('theme-light',!dark);localStorage.setItem(KEY,dark?'dark':'light');btn.textContent=dark?'üåô':'üåû';});}
    })();

    // Simple client-side auth (dev only) ‚Äî matches Basic auth we'll add on backend (admin/admin)
    const ADMIN_KEY='mterms-admin-basic';
    function authHeader(){
      const token = localStorage.getItem(ADMIN_KEY);
      return token ? {'Authorization':'Basic '+token} : {};
    }

    const API='https://mterm2026-559f9bf571b5.herokuapp.com';
    const $=id=>document.getElementById(id);

    // Login flow
    $('aLogin').addEventListener('click',()=>{
      const u=$('aUser').value.trim(), p=$('aPass').value;
      if(!u||!p){$('aMsg').textContent='‚ùå Enter username & password';return;}
      const token=btoa(u+':'+p);
      localStorage.setItem(ADMIN_KEY, token);
      $('aMsg').textContent='‚úÖ Logged in';
      $('loginCard').style.display='none';
      $('dash').style.display='block';
      loadPage(1);
    });
    $('logoutBtn').addEventListener('click',()=>{
      localStorage.removeItem(ADMIN_KEY); location.reload();
    });

    // Table/pagination
    let page=1, limit=20, total=0, rows=[];
    async function loadPage(p){
      page=p;
      $('rows').innerHTML='<tr><td colspan="8">Loading‚Ä¶</td></tr>';
      const q = encodeURIComponent($('q').value||'');
      try{
        const r = await fetch(`${API}/api/admin/registrations?page=${page}&limit=${limit}&q=${q}`, { headers: authHeader() });
        const data = await r.json();
        if(!r.ok) throw new Error(data.error||'HTTP '+r.status);
        rows=data.rows||[]; total=data.total||0;
        $('rows').innerHTML = rows.map(doc=>{
          const name=[doc.personal?.firstName||'',doc.personal?.lastName||''].join(' ').trim();
          return `<tr>
            <td><input type="checkbox" class="sel" data-id="${doc._id}" data-code="${doc.regCode}" data-email="${doc.personal?.email||''}" data-name="${name}" data-aff="${doc.professional?.affiliation||''}" data-cat="${(doc.category||'').toUpperCase()}"></td>
            <td>${doc.regCode||''}</td>
            <td>${name||''}</td>
            <td>${doc.category||''}</td>
            <td>${doc.personal?.email||''}</td>
            <td>${doc.payment?.status||'pending'}</td>
            <td>${doc.professional?.affiliation||''}</td>
            <td class="actions">
              <button class="btn" data-act="edit" data-id="${doc._id}">Edit</button>
            </td>
          </tr>`;
        }).join('') || '<tr><td colspan="8"><em>No results</em></td></tr>';
        $('pageInfo').textContent = `Page ${page} ‚Ä¢ ${Math.min(page*limit, total)} / ${total}`;
      }catch(err){
        $('rows').innerHTML = `<tr><td colspan="8" style="color:#c00">‚ùå ${err.message}</td></tr>`;
      }
    }

    $('refresh').addEventListener('click',()=>loadPage(1));
    $('prev').addEventListener('click',()=>{if(page>1) loadPage(page-1);});
    $('next').addEventListener('click',()=>{if(page*limit<total) loadPage(page+1);});
    $('q').addEventListener('input',()=>{clearTimeout(window._t); window._t=setTimeout(()=>loadPage(1),300);});

    // Row actions
    document.getElementById('tbl').addEventListener('click',async(e)=>{
      const btn = e.target.closest('button');
      if(!btn) return;
      const act = btn.dataset.act, id = btn.dataset.id;
      if(act==='edit'){ openEditor(id); }
    });

    // Load one doc and fill editor
    async function openEditor(id){
      try{
        const r = await fetch(`${API}/api/admin/registrations/${id}`, { headers: authHeader() });
        const {doc} = await r.json();
        if(!r.ok) throw new Error('Load failed');

        // Fill
        $('editCard').style.display='block';
        $('editCode').textContent = doc.regCode;
        $('f-category').value = doc.category || 'academia';
        $('f-dinner').checked = !!doc.addons?.dinner;

        $('p-firstName').value = doc.personal?.firstName||'';
        $('p-lastName').value  = doc.personal?.lastName||'';
        $('p-email').value     = doc.personal?.email||'';
        $('p-phone').value     = doc.personal?.phone||'';
        $('p-country').value   = doc.personal?.country||'';

        $('pro-affiliation').value = doc.professional?.affiliation||'';
        $('pro-dept').value        = doc.professional?.department||'';
        $('pro-role').value        = doc.professional?.roleTitle||'';

        const isStudent = (doc.category==='student');
        $('studentOnly').style.display = isStudent ? 'block' : 'none';
        $('s-university').value = doc.student?.university||'';
        $('s-level').value      = doc.student?.level||'';
        $('s-grad').value       = doc.student?.expectedGradYear||'';

        $('pr-presenting').checked = !!doc.program?.presenting;
        $('pr-type').value   = doc.program?.type||'none';
        $('pr-title').value  = doc.program?.title||'';
        $('pr-topic').value  = doc.program?.topicArea||'';

        $('b-billTo').value = doc.billing?.billTo||'';
        $('b-taxNo').value  = doc.billing?.taxNo||'';
        $('b-po').value     = doc.billing?.poNumber||'';

        $('a-line1').value = doc.address?.line1||'';
        $('a-line2').value = doc.address?.line2||'';
        $('a-city').value  = doc.address?.city||'';
        $('a-state').value = doc.address?.state||'';
        $('a-postcode').value = doc.address?.postcode||'';
        $('a-country').value  = doc.address?.country||'';

        $('c-pdpa').checked = !!doc.consents?.pdpa;
        $('c-coc').checked  = !!doc.consents?.codeOfConduct;
        $('c-mkt').checked  = !!doc.consents?.marketingOptIn;

        $('pay-status').value = doc.payment?.status||'pending';
        $('pay-amount').value = doc.payment?.amount||'';

        // Badge preview text
        $('badgeName').textContent = [doc.personal?.firstName||'',doc.personal?.lastName||''].join(' ').trim()||'Participant Name';
        $('badgeAffil').textContent = doc.professional?.affiliation||'Institution / Company';
        $('badgeCat').textContent = (doc.category||'Participant').toUpperCase();

        // Bind save
        $('save').onclick = ()=>saveChanges(id, doc);
        $('printBadge').onclick = ()=>{window.print();};
        $('loadPhoto').onclick = ()=>loadLatestPhoto(doc.regCode, doc.personal?.email);
      }catch(err){
        alert('Failed to open editor: '+err.message);
      }
    }

    async function saveChanges(id, orig){
      $('save').disabled = true; $('saveMsg').textContent = 'Saving‚Ä¶';
      const updates = {
        category: $('f-category').value,
        addons: { dinner: $('f-dinner').checked },
        personal: {
          firstName:$('p-firstName').value.trim(), lastName:$('p-lastName').value.trim(),
          email:$('p-email').value.trim(), phone:$('p-phone').value.trim(), country:$('p-country').value.trim()
        },
        professional: {
          affiliation:$('pro-affiliation').value.trim(), department:$('pro-dept').value.trim(), roleTitle:$('pro-role').value.trim()
        },
        student: ($('f-category').value==='student') ? {
          university:$('s-university').value.trim(), level:$('s-level').value, expectedGradYear:$('s-grad').value?Number($('s-grad').value):undefined
        } : undefined,
        program: {
          presenting:$('pr-presenting').checked, type:$('pr-type').value, title:$('pr-title').value.trim(), topicArea:$('pr-topic').value.trim()
        },
        billing: { billTo:$('b-billTo').value.trim(), taxNo:$('b-taxNo').value.trim(), poNumber:$('b-po').value.trim() },
        address: { line1:$('a-line1').value.trim(), line2:$('a-line2').value.trim(), city:$('a-city').value.trim(), state:$('a-state').value.trim(), postcode:$('a-postcode').value.trim(), country:$('a-country').value.trim() },
        consents: { pdpa:$('c-pdpa').checked, codeOfConduct:$('c-coc').checked, marketingOptIn:$('c-mkt').checked },
        payment: { status:$('pay-status').value, amount:$('pay-amount').value?Number($('pay-amount').value):undefined }
      };
      if (updates.student===undefined) delete updates.student;
      try{
        const r = await fetch(`${API}/api/admin/registrations/${id}`, {
          method:'PUT',
          headers:{ 'Content-Type':'application/json', ...authHeader() },
          body: JSON.stringify({ updates })
        });
        const data = await r.json();
        if(!r.ok) throw new Error(data.error||'Update failed');
        $('saveMsg').textContent='‚úÖ Saved';
        loadPage(page);
      }catch(err){
        $('saveMsg').textContent='‚ùå '+err.message;
      }finally{
        $('save').disabled = false;
      }
    }

    async function loadLatestPhoto(regCode, email){
      const el=$('photoMsg'); el.textContent='Loading photo‚Ä¶';
      try{
        const r = await fetch(`${API}/api/uploads/history?regCode=${encodeURIComponent(regCode)}&email=${encodeURIComponent(email)}&type=profilePhoto`);
        const data = await r.json();
        if(!r.ok) throw new Error(data.error||'Error');
        if(data.count){
          const last = data.rows[data.rows.length-1];
          $('badgePhoto').src = `${API}${last.downloadUrl}`;
          el.textContent='‚úÖ Loaded';
        }else{
          $('badgePhoto').removeAttribute('src');
          el.textContent='No photo on file.';
        }
      }catch(err){ el.textContent='‚ùå '+err.message; }
    }

    // Bulk print for selected
    $('printSel').addEventListener('click', async ()=>{
      const checks=[...document.querySelectorAll('.sel:checked')];
      if(!checks.length){ alert('Select at least one row.'); return; }
      const area=$('printArea'); area.innerHTML=''; area.style.display='grid';
      for(const c of checks){
        const div=document.createElement('div'); div.className='badge';
        div.innerHTML = `
          <div class="badge-top">
            <div class="badge-logos">
              <img src="public/uitm.png" alt="UiTM">
              <img src="public/mohe.png" alt="MOHE">
              <img src="public/tesma.png" alt="TESMA">
            </div>
          </div>
          <div class="badge-photo-wrap"><img class="badge-photo" src="" alt="ID"></div>
          <div class="badge-info">
            <div class="badge-name">${c.dataset.name||'Participant Name'}</div>
            <div class="badge-affil">${c.dataset.aff||'Institution / Company'}</div>
            <div class="badge-cat">${(c.dataset.cat||'PARTICIPANT')}</div>
          </div>
          <div class="badge-footer">MTERMS 2026 ‚Ä¢ Shah Alam</div>`;
        // try fetch latest photo
        try{
          const r = await fetch(`${API}/api/uploads/history?regCode=${encodeURIComponent(c.dataset.code)}&email=${encodeURIComponent(c.dataset.email)}&type=profilePhoto`);
          const data = await r.json();
          if(r.ok && data.count){
            const last=data.rows[data.rows.length-1];
            div.querySelector('.badge-photo').src = `${API}${last.downloadUrl}`;
          }
        }catch{}
        area.appendChild(div);
      }
      window.print();
      setTimeout(()=>{area.style.display='none'; area.innerHTML='';}, 500);
    });

    // Select all
    $('selAll').addEventListener('change', (e)=>{
      document.querySelectorAll('.sel').forEach(x=>x.checked=e.target.checked);
    });

    // Auto-show dashboard if already ‚Äúlogged in‚Äù
    (function(){
      const token = localStorage.getItem(ADMIN_KEY);
      if(token){
        $('loginCard').style.display='none';
        $('dash').style.display='block';
        loadPage(1);
      }
    })();
  </script>

  <style>
/* ---------- Admin readability hard-overrides ---------- */

/* 1) Search/inputs: visible placeholder in Safari/Chrome/Firefox */
.admin-wrap input,
.admin-wrap select,
.admin-wrap textarea { color: var(--text) !important; }

/* Safari/Chromium */
.admin-wrap input::-webkit-input-placeholder,
.admin-wrap textarea::-webkit-input-placeholder { color: var(--muted) !important; opacity: 1 !important; }
/* Firefox */
.admin-wrap input::placeholder,
.admin-wrap textarea::placeholder { color: var(--muted) !important; opacity: 1 !important; }

/* 2) Table headers: stronger contrast */
.admin-wrap table thead th {
  color: var(--text) !important;
  font-weight: 700 !important;
}
.theme-dark .admin-wrap table thead th { color: #e5e7eb !important; }
.theme-light .admin-wrap table thead th { color: #0b1115 !important; }

/* 3) Disabled buttons: stop Safari‚Äôs dimming and set readable colors */
.admin-wrap .btn:disabled,
.admin-wrap button[disabled] {
  opacity: 1 !important;            /* cancel browser fade */
  cursor: not-allowed !important;
  border-color: var(--border) !important;
}

/* light */
.theme-light .admin-wrap .btn:disabled,
.theme-light .admin-wrap button[disabled] {
  background: #eef2f7 !important;
  color: #48566a !important;
}
/* dark */
.theme-dark .admin-wrap .btn:disabled,
.theme-dark .admin-wrap button[disabled] {
  background: #2a2f36 !important;
  color: #c9d3dd !important;
  border-color: #3a424a !important;
}

/* 4) Ghost buttons (Logout) text contrast in light */
.theme-light .admin-wrap .btn.ghost {
  color: #0b1115 !important;
  border-color: var(--border) !important;
}

/* 5) Make tiny ‚ÄúEdit‚Äù labels readable even when disabled */
.admin-wrap .actions .btn:disabled { font-weight: 700 !important; }
</style>


  <style>
/* Force all button text to black for visibility */
button,
.btn {
  color: #000 !important;
}

/* Optional: keep dark background for dark mode but readable text */
.theme-dark button,
.theme-dark .btn {
  color: #000 !important;
  background-color: #f0f0f0 !important;
  border: 1px solid #999 !important;
}
</style>



<style>


/* 2Ô∏è‚É£ Give the whole edit box a light-blue background and subtle border */
#editCard {
  background-color: #e6f4ff !important;   /* light blue */
  border: 1px solid #b3d7ff !important;
  border-radius: 12px;
}

/* optional: tone text contrast slightly darker inside that box */
#editCard h3, #editCard h4, #editCard label {
  color: #0b1115;
}
</style>



  
</body>
</html>

